# 初識以太坊

## 錢包、測試網絡和簡單交易



## 以太單位

- 以太坊的貨幣單位成為以太，也成為ETH
- ether被細分為更小的單位， 直到可能的最小單位，稱為wei 1 ether = 10^18 wei
- 以太的值總是在以太坊內容表示為以wei表示無符號整數值
- 以太的各種單位都有一個使用國際單位製SI的科學名稱和一個口語名稱



## 以太幣各種單位名稱

| 值                                | 指數  | 通用名稱 | SI名稱                |
| --------------------------------- | ----- | -------- | --------------------- |
| 1                                 | 1     | wei      | Wei                   |
| 1,000                             | 10^3  | Babbage  | Kilowei or femtoether |
| 1,000,000                         | 10^6  | lovelace | Megawei or pricoether |
| 1,000,000,000                     | 10^9  | shannon  | Gigawei ot nanoether  |
| 1,000,000,000,000                 | 10^12 | szabo    | Microether or micro   |
| 1,000,000,000,000,000             | 10^15 | finney   | Milliether or milli   |
| 1,000,000,000,000,000,000         | 10^18 | ether    | Ether                 |
| 1,000,000,000,000,000,000,000     | 10^21 | grand    | Megaether             |
| 1,000,000,000,000,000,000,000,000 | 10^24 |          |                       |



## 以太坊錢包

以太坊錢包是我們進入以太坊系統的門戶，它包含了私鑰，可以代表我們創建和廣播交易。

- MetaMask: 一個瀏覽器擴展錢包，可在瀏覽器中運行
- Jaxx: 一款多平台，多幣種的錢包，可在各種操作系統上運行，包括Android, IOS, Windows,Mac Linux
- MyEtherWallet: 一個基於web的錢包，可以在任何瀏覽器中運行
- Emerald Wallet: 旨在與ETC配合使用，但與其他基於以太坊的區塊鏈兼容



## 私鑰 公鑰 和地址

- 私鑰
  - 以太坊私鑰事實上只是一個256位的隨機數，用於發送以太的交易中創建簽名來證明自己對資金的所有權
- 公鑰
  - 公鑰是由私鑰通過橢圓曲線加密secp256k1算法單向生成的512位（64字節）數
- 地址
  - 地址是由公鑰的keccak-256單向哈希，取最後20個字節（160位）派生出來的標識符



## 安全須知

- beystore文件就是加密存儲的私鑰。所以當系統提示你選擇密碼時，將其設置為強密碼，備份不要共享，如果沒有密碼管理器，請將其寫下來並將其存放在帶有鎖的抽屜或保險箱中，要訪問賬戶，你必須同時有keystore文件和密碼
- 助記符可以到處私鑰，所以可以認為助記符就是私鑰，請使用幣和紙進行物理備份，不要把這個任務留給”以後：，你會忘記。
- 切記以簡單形式存儲私鑰，尤其是以電子方式存儲
- 不要將私鑰資料存儲在電子文檔，數碼照片，屏幕截圖，在線驅動器，加密pdf等中，使用密碼管理器或筆和紙
- 在轉移任何大額金額之前，首先要做一個小的測試交易，收到測試交易後，再嘗試從該錢包發送。



## 安裝MetaMask

google 安裝metaMask



## 怎样安全存储助记词

- 将助记词被分在纸上，两次
- 将两个纸张备份放在单独的安全位置，例如防火保险箱，锁定抽屉或保险箱
- 要将纸质备份视为自己在以太坊钱包中存储的等值现金，任何人能够访问这些单词的人都可以访问并窃取你的资金



## 助记词

- 助记词是明文私钥的另一种表现形式，最早由BIP - 39 提出，目的是帮助用户记忆复杂的私钥256位
- 技术上该提议可以再任意区块链中实现，比如使用完全相同的助记词在比特币和区块链上生成的地址可以是不同的，用户只需要记住满足一定规则的词组，钱包就可以基于该词组创建一些账户，并且保障不论是在什么硬件、什么时间创建出来的账户、公钥、私钥都完全相同，这样既解决了账号识记得问题，也把账户恢复的门槛降低了很多
- 支持BIP39提议的钱包也可以归类为HD钱包(Hierarchical Deterministic Wallet), Metamask 当属此类



## 切换网络

- Main Network (Network ID: 1)
  - 主要的 公共的 以太坊区块链 真正的ETH 真长的价值 真正的结果
- Ropsten Test Network (Network ID: 3)
  - 以太坊公共测试区块链和网络，使用工作量证明共识，该网络上的ETH没有任何价值
- Kovan Test Network (Network ID: 42)
  - 以太坊公共测试区块链和网络，使用Aura协议进行权威证明POA共识（联合签名）该网络上的ETH没有任何价值 此测试网络仅由Parity支持
- Rinkeby Test Network (Network ID: 4)
  - 以太坊公共测试区块链和网络，使用Cilque协议进行权威证明POA共识，（联合签名）该网络上的ETH没有任何价值
- Localhost 8545
  - 连接到与浏览器在同一台计算机上运行的节点，该节点可以是任何公共区块链的一部分，也可以是私有testnet
- Custom RPC
  - 允许将Metamask连接到任意兼容的geth的RPC接口的节点，该节点可以是任何公共或私人区块链的一部分。



## 水龙头

```solidity
pragma solidity ^0.4.0;

contract Faucet {
	
	function withdraw(uint withdraw_ammount) public {
		require(withdraw_amount <= 10000000000000);
		
		msg.sender.transfer(withdraw_amount);
	}
	
	function () public payable { }
}
```



## Remix

编译环境



## Code 

```
pragma solidity ^0.4.0;

contract Faucet {

	//function withdraw() public {
	//	msg.sender.transfer(1 ether);
	//}
	
	function withdraw(uint ammount) public {
		require(ammount <= 1 ether);
		msg.sender.transfer(ammount);
	}
	
	function () public payable {}
}
```



# 以太坊客户端



## 什么是以太坊客户端

- 以太坊客户端是一个软件应用程序，他实现了以太坊规范并通过p2p网络与其他以太坊客户端进行通信，如果不同的以太坊客户端符合参考规范和标准化通信协议，则可以进行相互操作。
- 以太坊是一个开源项目，由黄皮书正式规范定义。除了各种以太坊改进提案之外，此正式规范还定义了以太坊客户端的标准行为。
- 因为以太坊有明确的正式规范，以太坊客户端有了许多独立开发的软件实现，他们之间可以彼此交互。



## 基于以太坊规范的网络



- 存在各种基于以太坊规范的网络，这些网络基本符合以太坊黄皮书中定义的形式规范，但他们之间可能相互也可能不相互操作。
- 这些基于以太坊的网络有：以太坊，以太坊经典，Ella， Expanse， Ubiq， Musicoin等等
- 虽然大多数在协议级别兼容，但这些网络通常具有特殊要求，以太坊客户端软件的维护人员，需要进行微小更改，以支持每个网络的功能或属性。



## 以太坊的多种客户端

- Go-ethereum (Go) :  官方，使用最多 GETH
- Parity(Rust) : 最轻便，在历次的以太坊网络攻击中表现卓越
- Cpp-etherenum(C++) :
- Pyethapp(python) :
- Etherenumjs-lib(javascript) :
- EtherenumJ/Harmony(java) : 



## 以太坊全节点



- 全节点是整个主链的一个副本， 存储并维护链上的所有数据，并随时验证新区块的合法性。
- 区块链的健康和扩展性，取决于具有许多独立操作和地理上分散的全节点。每个全节点都可以帮助其他新节点获取区块数据，并提供所有交易和合约的独立验证。
- 运行全节点将耗费巨大的成本，包括硬件资源和带宽
- 以太坊开发不需要再实时网络上运行全节点，我们可以使用测试网络的节点来代替，也可以用本地私链，或者使用服务商提供的基于云的以太坊客户端，这些几乎都可以执行所有操作。



## 远程客户端和轻节点

- 远程客户端
  - 不存储区块链的本地副本或验证块和交易，这些客户端一般只提供钱包的功能，可以创建和广播交易。远程客户端可用与连接到现有网络，MetaMask就是一个这些的客户端
- 轻节点
  - 不保存链上的区块历史数据，只保存区块链当前的状态，轻节点可以对块和交易进行验证。



## 	全节点的优缺点



#### 优点

- 为以太坊网络的灵活性和抗审查性提供有力支持

- 权威地验证所有交易

- 可以直接与公共区块链上的任何合约交互
- 可以离线查询区块链额状态（账户 合约）等
- 可以直接把自己的合约部署到公共区块链中

#### 缺点

- 需要巨大的硬件和带宽资源，而且会不断增长
- 第一次下载往往需要几天才能完成同步
- 必须及时维护，升级并保持在线状态以及同步区块





## 公共测试网络节点的优缺点

### 优点

- 一个testnet节点需要同步和存储更少的数据，大约10GB， 具体取决于不同的网络
- 一个testnet节点一般可以在几个小时内完全同步
- 部署合约或进行交易只需要发送测试以太，可以从“水龙头”免费获得
- 测试网络是公共区块链，有许多其他用户和合约运行（区别于私链）

### 缺点

- 测试网络上使用测试以太，它没有价值。因此，无法测试交易对手的安全性，因为没有任何利害关系。
- 测试网络上的测试无法涵盖所有的真实主网。例如交易费用虽然是发送交易所必须的，但由于gas免费，因此testnet上往往不会考虑，而且一般来说，测试网络不会像主网那样经常拥堵。



## 本地私链的优缺点

### 优点

- 磁盘上几乎没有数据，也不同步别的数据，是一个完全“干净”的环境
- 无需获取测试以太，你可以任意分配以太，也可以随时自己挖矿获得
- 没有其他用户，也没有其他合约，没有任何外部干扰

### 缺点

- 没有其他用户意味着与公链的行为不同，发送的交易并不存在空间或交易顺序的竞争
- 除自己之外没有旷工意味着挖矿更容易预测，因为无法测试公链上发生的某些情况
- 没有其他合约，意味着你必须部署要测试的所有内容，包括所有的依赖项和合约库







