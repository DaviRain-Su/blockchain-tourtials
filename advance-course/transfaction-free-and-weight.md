#  交易费用和权重

## 内容

- 交易费用的存在原因
- 设计思路
- 组成部分
- FRAME模块导读



---

> 孙凯超
>
> Kaichao@parity.io
>
> Https://substrate.io

## 存在原因 - Web2.0

服务提供方利用用户的个人信息、产生的数据、注意力等变现：

- 广告推送
- 用户数据分析指导商家决策
- 直接共享、贩卖用户隐私等

**用户数据的所有者是服务提供方**

## 存在原因 - Web 3.0 

用户通过私钥掌握数据，敏感数据可以通过加密防止被窃取。

天下没有免费的午餐，享受自由也要支付服务费用，用来：

- 激励参与方便更加有效的协作
- 调节资源的利用率

费用主要用于：团队、节点、用户

## 如何设计交易费用

典型的资源限制：

- 不同地区带宽差异巨大
- 有限的区块大小
- 有限的区块生成时间
- 昂贵的链上存储空间
- 如何分配交易费用

可用的设计思路:

- 计算每笔交易占用的字节数来收取费用
- 计算或者性能测试得出不同交易所消耗的时间
- 一次性付费和租赁两种模式
- 通过链上治理进行分配

## Substrate 交易费用组成

总费用 = 基本费用 + 字节费用 + 权重费用 * 动态调节费率 + 小费

参数：

- ExtrinsicBaseWeight
  - 125 * WEIGHT_PER_MICROS
- MaximumBlockWeight
  - 2 * WEIGHT_PER_SECOND
- WeightToFee

## 字节费用

总费用 = 基本费用 + 字节费用 + 权重费用 * 动态调节费率 + 小费

参数和特点：

- 字节数是SCALE编码后的长度
- 最大区块长度
  - MaximumBlockLength
- 每字节的费用
  - TransactionByteFee
- 配置在可升级的runtime代码





