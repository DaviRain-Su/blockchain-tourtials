# Substrate Recipes-Zh

ä¸ºæœ‰æŠ±è´Ÿçš„åŒºå—é“¾å·¥ç¨‹å¸ˆå‡†å¤‡çš„å®è·µæŒ‡å—

Substrate Recipes æ˜¯ä¸€æœ¬ä½¿ç”¨çš„å·¥ä½œç¤ºä¾‹æŒ‡å—ï¼Œæ¼”ç¤ºäº†åœ¨ä½¿ç”¨substrateå»ºç«‹blockchainçš„æœ€ä½³åšæ³•ã€‚æ¯ä¸ªé£Ÿè°±ä¸­åŒ…å«äº†å®Œæ•´çš„å·¥ä½œä»£ç ï¼Œä»¥åŠè¯¦ç»†çš„è§£é‡Šä»£ç ã€‚

## å¦‚ä½•ä½¿ç”¨è¿™æœ¬ä¹¦

ä½ å¯ä»¥æŒ‰ç…§ä»»ä½•ç‰¹å®šçš„é¡ºåºå»è¯»è¿™æœ¬ä¹¦ã€‚å¦‚æœä½ æœ‰ä¸€ä¸ªç‰¹å®šè¯é¢˜æƒ³è¦æ·±å…¥ç ”ç©¶ï¼Œæˆ–è€…æƒ³è¦å¯»æ‰¾ä¸»é¢˜/å…³é”®å­—ï¼Œè¯·ä½¿ç”¨æœç´¢ğŸ”æŒ‰é’®ï¼ˆå·¦ä¸Šè§’çš„å°æ”¾å¤§é•œï¼‰æ¥æœç´¢ä¸»é¢˜ã€‚è¿™ä¸ªåˆ—è¡¨æ˜¯æŒ‰ç…§ä¸æ–­å¢åŠ çš„å¤æ‚æ€§å¤§è‡´æ’åˆ—çš„ã€‚

ä½ ä¸èƒ½ä»…ä»…é€šè¿‡é˜…è¯»æ¥å­¦ä¹ å»ºç«‹blockchain, åœ¨ä½ ç ”ç©¶recipeçš„è¿‡ç¨‹ä¸­ï¼Œç»ƒä¹ ç¼–è¯‘ï¼Œæµ‹è¯•å’Œä¿®æ”¹æ¯ä¸ªrecipeï¼Œç©è€è¿™äº›ä»£ç ï¼Œæå–å…¶ä¸­çš„æ¨¡å¼ï¼Œå¹¶ä¸”å°†ä»–ä»¬åº”ç”¨äºä½ æƒ³è¦è§£å†³çš„é—®é¢˜ï¼

å¦‚æœä½ è¿˜æ²¡æœ‰ï¼Œä½ å¯èƒ½åº”è¯¥ç«‹å³å…‹éš†è¿™ä¸ªå­˜å‚¨åº“ã€‚

```
git clone https://github.com/substrate-developer-hub/recipes.git
```

## å¯»æ±‚å¸®åŠ©

åœ¨å­¦ä¹ ä»»ä½•æ–°æŠ€èƒ½æ—¶ï¼Œä½ éƒ½ä¼šä¸å¯é¿å…åœ°åœ¨æŸä¸ªæ—¶åˆ»é™·å…¥å›°å¢ƒï¼Œå½“ä½ é™·å…¥å›°å¢ƒæ—¶ï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹å‡ ç§æ–¹å¼å¯»æ±‚å¸®åŠ©ï¼š

- åœ¨[stack overflow](https://stackoverflow.com/questions/tagged/substrate)ä¸Šè¯·æ±‚å¸®åŠ©
- åœ¨[substrate Technical Element channel](https://app.element.io/#/room/#substrate-technical:matrix.org) ä¸Šè¯¢é—®å¸®åŠ©
- ç»™è¿™ä¸ªä»“åº“[æäº¤issue](https://github.com/substrate-developer-hub/recipes/issues/new)

## å…ˆå†³æ¡ä»¶

æ¯ä¸ªrecipeé’ˆå¯¹çš„æ˜¯substrateå¼€å‘çš„ä¸€ä¸ªç‰¹å®šå†…å®¹çš„ç»†èŠ‚ï¼Œåœ¨æ‰€æœ‰çš„recipeæœ‰ä¸€äº›åŸºæœ¬substrateå¼€å‘å’Œrustç¯å¢ƒçš„å‡è®¾ã€‚ä¸€èˆ¬è€Œè¨€ï¼Œä½ åº”è¯¥æ»¡è¶³å·²ä¸‹å…ˆå†³æ¡ä»¶ï¼š

- æœ‰ä¸€ä¸ªå·¥ä½œçš„substrate å¼€å‘ç¯å¢ƒï¼Œè¿™æ˜¯[å®˜æ–¹æ–‡æ¡£çš„è®¾ç½®substateå¼€å‘ç¯å¢ƒçš„æŒ‡å—](https://substrate.dev/docs/en/knowledgebase/getting-started/)
- ç†è§£[The Rust Book å®˜æ–¹å›¾ä¹¦](https://doc.rust-lang.org/book/index.html)çš„å‰åç« çš„å†…å®¹ï¼Œä½ åº”è¯¥æ˜¯è¾¹å­¦ä¹ substrateä¾¿å­¦ä¹ rustè€Œä¸æ˜¯åœ¨å­¦ä¹ substrateä¹‹å‰å…ˆå­¦ä¹ rust
- å®Œæˆå‡ ä¸ª[å®˜æ–¹çš„substrateçš„æ•™ç¨‹](https://substrate.dev/en/tutorials)

## SubstrateèŠ‚ç‚¹çš„ç»“æ„

è®¤è¯†ç¼–ç çš„æŠ½è±¡æ˜¯å¾ˆæœ‰ç”¨çš„

ä¸ºäº†ç†è§£å­˜å‚¨åº“ä¸­çš„ä»£ç æ˜¯å¦‚ä½•ç»„ç»‡çš„, æˆ‘ä»¬é¦–å…ˆæ¥çœ‹ä¸€ä¸‹substrateèŠ‚ç‚¹æ˜¯å¦‚ä½•æ„é€ çš„ã€‚æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰è®¸å¤šç»„ä»¶æ¥ç®¡ç†ï¼Œä¾‹å¦‚ äº‹åŠ¡é˜Ÿåˆ— (transaction queue)ï¼Œé€šè¿‡p2pç½‘ç»œè¿›è¡Œé€šä¿¡ï¼Œå°±åŒºå—é“¾çš„çŠ¶æ€å’Œé“¾çš„å®é™…è¿è¡Œæ—¶é€»è¾‘è¾¾æˆå…±è¯†ã€‚èŠ‚ç‚¹çš„æ¯ä¸ªæ–¹é¢æœ¬èº«éƒ½å¾ˆæœ‰è¶£çš„ï¼Œè¿è¡Œæ—¶æ˜¯ç‰¹åˆ«æœ‰è¶£çš„ï¼Œå› ä¸ºå®ƒåŒ…å«äº†ä¸šåŠ¡é€»è¾‘ï¼ˆçŠ¶æ€è½¬æ¢å‡½æ•°ï¼‰ï¼Œè¿™äº›ä¸šåŠ¡é€»è¾‘é€ å°±äº†é“¾çš„åŠŸèƒ½



å¾ˆå¤šï¼Œä½†å¹¶ä¸æ˜¯æ‰€æœ‰çš„recipeséƒ½ä¸“æ³¨äºä½¿ç”¨FRAME, Parityçš„æ¡†æ¶ç”±ç§°ä¸ºpalletçš„å•ä¸ªæ¨¡å—ç»„æˆçš„ï¼Œä½¿ç”¨FRAME æ„å»ºçš„è¿è¡Œæ—¶é€šå¸¸åŒ…å«è¿™æ ·çš„pallet, Kitchen nodeæ˜¯ä½ è¦éµå®ˆçš„èŒƒä¾‹åœ¨ä½ åˆ›å»ºä½ è‡ªå·±çš„blockchainä¹‹å‰ã€‚

![substrate-architecture](../pic/substrate-architecture.png)

## æˆ‘ä»¬çš„Kitchen ç›®å½•

å¦‚æœä½ è¿˜æ²¡ï¼Œé‚£ä¹ˆç°åœ¨å°±å¯ä»¥å…‹éš†å®ƒã€‚

- Consensus: ç”¨äºåº•å±‚èŠ‚ç‚¹çš„ä¸€è‡´æ€§å¼•æ“
- Node: å‡†å¤‡è¿è¡Œçš„å®Œæ•´çš„substrate èŠ‚ç‚¹
- Pallets: pallets ç”¨äºFRAME-basedçš„è¿è¡Œæ—¶
- Runtimes: ç”¨äºåº•å±‚èŠ‚ç‚¹çš„è¿è¡Œæ—¶
- Text: è¿™æœ¬ä¹¦çš„æ¥æºï¼Œä¹Ÿå°±æ˜¯ä½ ç°åœ¨æ­£åœ¨è¯»çš„ä¸œè¥¿

æ¢ç´¢è¿™äº›ç›®å½•å°±ä¼šå‘ç°è¿™æ ·çš„ä¸€æ£µæ ‘

```
recipes
|
+-- consensus
  |
  +-- manual-seal
  |
  +-- sha3pow
|
+-- nodes
    |
    +-- basic-pow
    |
    +-- ...
    |
    +-- rpc-node
|
+-- pallets
    |
    +-- basic-token
    |
    + ...
    |
    +-- weights
|
+-- runtimes
    |
    +-- api-runtime
    |
    + ...
    |
    +-- weight-fee-runtime
|
+-- text

```

## Kitchen Node çš„å†…éƒ¨

è®©æˆ‘ä»¬æ·±å…¥çš„äº†è§£ä¸€ä¸‹Kitchen Node 

æŸ¥çœ‹Kitchen Node çš„Cargo.tomlæ–‡ä»¶ï¼Œæˆ‘ä»¬çœ‹åˆ°å®ƒæœ‰ è®¸å¤šçš„ä¾èµ–ã€‚å®ƒä»¬ä¸­çš„å¤§å¤šæ•°æ¥è‡ªsubstrateè‡ªèº«ï¼Œäº‹å®ä¸Šï¼ŒKitchen Nodeçš„å¤§éƒ¨åˆ†å¹¶ä¸æ˜¯ç‹¬ä¸€æ— äºŒçš„æˆ–è€…ä¸“é—¨çš„ï¼Œå¹¶ä¸”substrateæä¾›æˆ‘äº†æˆ‘ä»¬å¯ä»¥ä½¿ç”¨çš„å¥å£®çš„å®ç°ï¼Œè¿è¡Œæ—¶ä¸æ¥è‡ªsubstrateï¼Œç›¸åï¼Œæˆ‘ä»¬ä½¿ç”¨runtimeæ–‡ä»¶å¤¹ä¸­çš„super-runtimeã€‚

Node/kitchen-node/Cargo.toml

```
# This node is compatible with any of the runtimes below
# ---
# Common runtime configured with most Recipes pallets.
runtime = { package = "super-runtime", path = "../../runtimes/super-runtime" }

# Runtime with custom weight and fee calculation.
# runtime = { package = "weight-fee-runtime", path = "../../runtimes/weight-fee-runtime"}

# Runtime with off-chain worker enabled.
# To use this runtime, compile the node with `ocw` feature enabled,
#   `cargo build --release --features ocw`.
# runtime = { package = "ocw-runtime", path = "../../runtimes/ocw-runtime" }

# Runtime with custom runtime-api (custom API only used in rpc-node)
# runtime = { package = "api-runtime", path = "../../runtimes/api-runtime" }
# ---

```

ä¸Šé¢å¼•ç”¨çš„æ³¨é‡Šè¡¨æ˜super runtimeä¸æ˜¯æˆ‘ä»¬é€‰æ‹©çš„å”¯ä¸€è¿è¡Œæ—¶ï¼Œæˆ‘è¿˜å¯ä»¥ä½¿ç”¨weight-free è¿è¡Œæ—¶ï¼Œæˆ‘é¼“åŠ±ä½ å°è¯•è¿™ä¸ªå®éªŒï¼ˆè¯·è®°ä½ï¼Œåœ¨å‰é¢çš„éƒ¨åˆ†é‡æ–°ç¼–è¯‘èŠ‚ç‚¹çš„æŒ‡ä»¤ï¼‰

æ¯ä¸ªèŠ‚ç‚¹éƒ½å¿…é¡»åˆæœ‰ä¸€ä¸ªè¿è¡Œæ—¶ã€‚ä½ å¯ä»¥é€šè¿‡æŸ¥çœ‹æˆ‘ä»¬Kitchenä¸­åŒ…å«çš„å…¶ä»–èŠ‚ç‚¹çš„Cargo.tomlæ–‡ä»¶æ¥ç¡®è®¤è¿™ä¸€ç‚¹

## Super Runtime çš„å†…éƒ¨

äº†è§£äº†kitchen Nodeä¾èµ–äºè¿è¡Œæ—¶ä¹‹åï¼Œç°åœ¨æˆ‘ä»¬æ›´æ·±å…¥åœ°äº†è§£Super runtime 

Runtimes/super-runtime/cargo.toml

```
# -- snip --

# Substrate Pallets
balances = { package = 'pallet-balances', , ... }
transaction-payment = { package = 'pallet-transaction-payment', ,... }
# Recipe Pallets
adding-machine = { path = "../../pallets/adding-machine", default-features = false }
basic-token = { path = "../../pallets/basic-token", default-features = false }

```

è¿™é‡Œæˆ‘ä»¬çœ‹åˆ°è¿è¡Œæ—¶ä¾èµ–äºè®¸å¤špalletï¼Œè¿™äº›palletä¸­çš„ä¸€äº›æ¥è‡ªsubstrateè‡ªèº«ã€‚äº‹å®ä¸Šï¼Œsubstrateæä¾›äº†ä¸€ä¸ªä¸°å¯Œçš„å¸¸ç”¨palleté›†åˆï¼Œä½ å¯ä»¥åœ¨ä½ è‡ªå·±çš„runtimeä¸­ä½¿ç”¨è¿™äº›palletï¼Œ runtimeè¿˜å¯ä»¥åŒ…å«ä¸€äº›è‡ªå®šä¹‰çš„palletï¼Œå†™åœ¨æˆ‘ä»¬çš„kitchen Nodeä¸­

## å¸¸è§æ¨¡å¼

æˆ‘ä»¬åˆšåˆšè§‚å¯Ÿäº†è¿™ä¸ªrecipeä½¿ç”¨çš„ä¸€èˆ¬æ¨¡å¼ï¼Œä»å†…åˆ°å¤–ï¼Œæˆ‘ä»¬çœ‹åˆ°ä¸€äº›palletä»£ç å­˜å‚¨åœ¨pallet/<pallet-name>/src/lib.rs  é€šè¿‡åœ¨runtimes/<runtime-name>/Cargo.tomlä¸­æ·»åŠ palletçš„åç§°å’Œç›¸å¯¹è·¯å¾„ï¼Œå°†palletåŒ…å«åˆ°runtimeä¸­ï¼Œç„¶ååœ¨node/<node-name>/Cargo.tomlä¸­æ·»åŠ è¿è¡Œæ—¶çš„åç§°å’Œç›¸å¯¹è·¯å¾„ï¼Œå°†å…¶å®‰è£…åˆ°èŠ‚ç‚¹ä¸­ã€‚

ä¸€äº›recipeæ¢ç´¢äº†è¿è¡Œæ—¶ä¹‹å¤–çš„blockchain å¼€æ”¾æ–¹é¢çš„ä¸œè¥¿ï¼Œå›é¡¾æœ¬èŠ‚å¼€å¤´çš„èŠ‚ç‚¹ä½“ç³»ç»“æ„ï¼Œå¯ä»¥æƒ³è±¡æ›´æ”¹èŠ‚ç‚¹çš„RPCæˆ–è€…Consensusåœ¨æ¦‚å¿µä¸Šç±»ä¼¼äºæ›´æ”¹å…¶è¿è¡Œæ—¶ã€‚


